<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body>
    <input name="uploadFiles" type="file" multiple />
    <button class="uploadBtn">Upload</button>

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>

    <script>
      $(".uploadBtn").click(() => {
        const formData = new FormData();
        const inputFile = $('input[type="file"]');

        const files = inputFile[0].files;
        for (const file of files) {
          console.log(file);
          formData.append("uploadFiles", file);
        }

        $.ajax({
          url: "/uploadAjax",
          processData: false,
          contentType: false, // 파일 업로드는 multipart/form-data 타입을 사용
          data: formData,
          type: "POST",
          dataType: "json",
          success: function (result) {
            console.log(result);
          },
          error: function (jqXHR, textStatus, errorThrown) {
            console.log(textStatus);
          },
        });
      });
    </script>
  </body>
</html>
